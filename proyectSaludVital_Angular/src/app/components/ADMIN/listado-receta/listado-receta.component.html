<h2>Listado de Recetas</h2>

<div *ngIf="cargando">Cargando recetas...</div>

<table *ngIf="!cargando && recetas.length > 0">
  <thead>
    <tr>
      <th>ID</th>
      <th>Médico</th>
      <th>Paciente</th>
      <th>Fecha Emisión</th>
      <th>Fecha Caducidad</th>
      <th>Estado</th>
      <th>Medicamentos</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let receta of recetas">
      <td>{{ receta.id }}</td>
      <td>{{ receta.medicoNombre }}</td>
      <td>{{ receta.pacienteNombre }}</td>
      <td>{{ receta.fechaEmision | date:'shortDate' }}</td>
      <td>{{ receta.fechaCaducidad | date:'shortDate' }}</td>
      <td><span class="badge" [ngClass]="obtenerClaseEstado(receta.estado)">{{ receta.estado }}</span></td>
      <td>
        <button type="button" (click)="receta.showItems = !receta.showItems">
          {{ receta.showItems ? 'Ocultar' : 'Ver Medicamentos' }}
        </button>
        <ul *ngIf="receta.showItems">
          <li *ngFor="let item of receta.items">
            {{ item.medicamentoNombre }} - {{ item.dosis }} ({{ item.frecuencia }})
          </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<div *ngIf="!cargando && recetas.length === 0">
  No hay recetas registradas.
</div>
