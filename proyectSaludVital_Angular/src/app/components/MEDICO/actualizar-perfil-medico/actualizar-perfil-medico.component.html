<div class="container">
  <div class="card">
    <h2>Actualizar Perfil Médico</h2>

    <p *ngIf="mensaje" [class]="mensajeError ? 'text-danger' : 'text-success'">{{ mensaje }}</p>

    <form [formGroup]="form" (ngSubmit)="guardar()">
      <label>Nombre</label>
      <input formControlName="nombre" class="form-control" />

      <label>Apellido</label>
      <input formControlName="apellido" class="form-control" />

      <label>Número de licencia</label>
      <input formControlName="numeroLicencia" class="form-control" />

      <label>Teléfono</label>
      <input formControlName="telefono" class="form-control" />

      <label>Email</label>
      <input formControlName="email" class="form-control" />

      <label>Especialidad</label>
      <select formControlName="especialidad" class="form-control">
        <option value="" disabled>Selecciona una especialidad</option>
        <option *ngFor="let e of especialidades" [value]="e">{{ e }}</option>
      </select>

      <label>Tarifa de consulta</label>
      <input type="number" formControlName="tarifaConsulta" class="form-control" />

      <label>URL de imagen</label>
      <input type="file" class="form-control" accept="image/png,image/jpeg" (change)="onImageSelected($event)" />

      <div class="horarios-header">
        <label>Horarios de atención</label>
        <button type="button" class="btn btn-primary btn-sm" (click)="agregarHorario()">+ Agregar horario</button>
      </div>

      <div formArrayName="horarios" class="horarios-wrapper">
        <div class="horario-row" *ngFor="let horario of horarios.controls; let i = index" [formGroupName]="i">
          <select formControlName="dia" class="form-control">
            <option *ngFor="let dia of diasSemana" [value]="dia">{{ dia }}</option>
          </select>

          <input type="time" formControlName="horaInicio" class="form-control" />
          <input type="time" formControlName="horaFin" class="form-control" />

          <button type="button" class="btn btn-danger btn-sm" (click)="eliminarHorario(i)">Quitar</button>
        </div>
      </div>

      <div class="actions">
        <button type="submit" class="btn btn-success">Guardar</button>
        <button type="button" class="btn btn-secondary" (click)="cancelar()">Cancelar</button>
      </div>
    </form>
  </div>
</div>