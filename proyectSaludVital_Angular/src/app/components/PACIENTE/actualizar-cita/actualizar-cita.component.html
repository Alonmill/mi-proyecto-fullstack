<div class="container">

  <!-- Mensaje -->
  <div *ngIf="mensaje" 
       [ngClass]="{'alert-success': mensaje.startsWith('✅'), 'alert-error': !mensaje.startsWith('✅')}" 
       class="alert">
    {{ mensaje }}
  </div>

  <h2>Actualizar Citas</h2>

  <!-- Listado de citas -->
  <table class="tabla">
    <thead>
      <tr>
        <th>ID</th>
        <th>Paciente</th>
        <th>Médico</th>
        <th>Fecha</th>
        <th>Hora</th>
        <th>Motivo</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let cita of citas">
        <td>{{ cita.id }}</td>
        <td>{{ cita.pacienteNombre }}</td>
        <td>{{ cita.medicoNombre }}</td>
        <td>{{ cita.fecha }}</td>
        <td>{{ cita.hora }}</td>
        <td>{{ cita.motivo }}</td>
        <td>
          <button (click)="seleccionarCita(cita)">Actualizar</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Formulario de actualización -->
  <div *ngIf="citaSeleccionadaId !== null" class="formulario-box">
    <h3>Actualizar Cita</h3>
    <form [formGroup]="formulario" (ngSubmit)="onSubmit()" class="formulario">
      <div class="form-group">
        <label>Médico ID:</label>
        <input formControlName="idMedico" type="number">
      </div>

      <div class="form-group">
        <label>Fecha:</label>
        <input formControlName="fecha" type="date">
      </div>

      <div class="form-group">
        <label>Hora:</label>
        <input formControlName="hora" type="time">
      </div>

      <div class="form-group">
        <label>Motivo:</label>
        <input formControlName="motivo" type="text">
      </div>

      <button type="submit">Guardar cambios</button>
    </form>
  </div>
</div>
